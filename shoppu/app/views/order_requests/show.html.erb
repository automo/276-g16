

<div class= "input_section">

<p id="notice"><%= notice %></p>

<h2 class="order_request_title"><%= @order_request.title %></h2>

<p class="order_request_sub_title"><%= @order_request.description %></p>

<div id="order_items_wrapper">
	<%= render @order_request.order_items %>
	<div id="form">
		<%= render "order_items/form" %>
	</div>
</div>

<div class="links">
	<%= link_to 'Edit', edit_order_request_path(@order_request) %> |
	<%= link_to 'Delete', order_request_path(@order_request), method: :delete, data: { confirm: "Are you sure?" }
 %> |
  <%= link_to 'Back', order_requests_path %>
</div>

</div>

<p>The longitude of this order is <%= @order_request.owner.longitude %></p>
<p>The latitude of this order is <%= @order_request.owner.latitude %></p>



<div style='width: 800px; margin-left:auto; margin-right: auto;'>
  <div id="directions" style='width: 800px; height: 400px;'></div>
</div>

<script type="text/javascript">



var directionsDisplay = new google.maps.DirectionsRenderer();
var directionsService = new google.maps.DirectionsService();

function calcRoute(position) {




  var origin      = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  var destination = new google.maps.LatLng(<%= @order_request.owner.latitude %>, <%= @order_request.owner.longitude %>);
  var request = {
      origin:      origin,
      destination: destination,
      travelMode:  google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
}

//getting current location for direction
if(navigator.geolocation){

	navigator.geolocation.getCurrentPosition(calcRoute);



}



var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'directions'}}, function(){
	directionsDisplay.setMap(handler.getMap());
});


</script>


<!-- AIzaSyCLhOKE-GbE_RxFpCb16gXkaMreWzes7ks API key for browser -->
